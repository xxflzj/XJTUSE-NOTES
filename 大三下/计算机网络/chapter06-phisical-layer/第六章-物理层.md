[TOC]

# 第六章 物理层

## 6.1 通信基础

### 6.1.1 信号

**信号**：数据的电气或电磁的表现。

**数据**：传送信息（如图片和文字等）的实体。

> :label:：无论数据或信号，都既可以是模拟的，也可以是数字的。模拟：连续的；数字：离散的
>
> :label:：信道上传送的信号分为**基带信号和宽带信号**。基带信号是将数字信号0和1真接用两种不同的电压表示，然后传送到数字信道上去传输，称为基带传输；宽带信号是将基带信号进行调制后形成**模拟信号**，然后再传送到模拟信道上去传输，称为宽带传输。**基带对应数字信号，宽带对应模拟信号。**
>
> :label::宽带传输在考研中可以等同于频带传输（都是传输模拟信号），频带传输有更多的子信道，并且这些子信道都可以同时发送信号。
> 

### 6.1.2 信源、信道、信宿、数据传输方式、通信方式与通信模式

:one: **信源**：信息的源泉，也就是通信过程中产生和发送信息的**设备或计算机**。

:two: **信道**：信息传送的道路，也就是信号的传输媒质，分为有线信道和无线信道，人们常说的双绞线和人造卫星传播信号分别是有线信道和无线信道的典型代表。

:three: **信宿**：信息的归宿地，也就是通信过程中接收和处理信息的**设备或计算机**。

:four: **数据传输方式分为串行传输和并行传输。**

> 串行传输：一个一个比特按照时间顺序传输（远距离传输经常采用）。
>
> 并行传输：多个比特通过多条通信信道同时传输（近距离传输经常采用）。

:five:**通信方式分为同步通信和异步通信**。

> 同步通信：要求接收端的时钟频率和发送端的时钟频率相等，以便使接收端对收到的比特流的采样判决时间是准确的。
>
> 异步通情：**发送数据以字节为单位，对每一字节增加一个起始比特和一个终止比特**。
> 它的特点是发送端发送完一个字节后，可以经过任意长的时间间隔再发送下一个字节。相对来说。同步通信技术较复杂，价格品费，但通信效率较高；而异步通信开销较大，价格低廉，使用具有一般精度的时钟来进行数据通信。

:six: **通信模式分为单向通信（单工）、双向交替通信（半双工）和双向同时通信（全双工）**

> 单工：只有一个方向的通信而没有反方向的交互，如有线广播电视。
>
> 半双工：通信双方都可以发送信息，但是不能双方同时发送，也不能同时接受，如对讲机。
>
> 全双工：通信双方可以同时发送和接收信息。
> 

### 6.1.3 奈奎斯特定理

#### 1、采样定理

在通信领域带宽是指信号最高频率与最低频率之差，单位为Hz。因此**将模拟信号转换成数字信号时，假设原始信号中的最大频率为f，那么采样频率样f~采样~必须大于或等于最大频率f的两倍，才能保证采样后的数字信号完整保留原始模拟信号的信息**。另外，采样定理又称为奈奎斯特定理。

#### 2、奈奎斯特定理

具体的信道所能通过的频率范围总是有限的（因为具体的信道带宽是确定的），所以信号中的大部分**高频分量**就过不去了，这样在传输的过程中会衰减，导致在接收端收到的信号的波形就失去了码元之间的清晰界限，这种现象叫作**码间串扰**。**应该去寻找在保证不出现码间串扰的条件下的码元传输速率的最大值**

奈奎斯特在采样定理和无噪声的基础上，提出了奈奎斯特定理。**奈奎斯特定理的公式**为

$C_{max}=f_{采样}\times \log_2N=2f\times\log_2N(bit/s)$

式中，f表示理想**低通信道的带宽；N表示每个码元的离散电平的数目**。

低通信道就是信号的频率只要不超过某个上限值，都可以不失真地通过信道，而频率超过该上限值则不能通过。也就是说，低通信道没有下限，只有上限。**理想低通信道的最高码元传输速率是每秒两个码元。**

只要N足够大，即编码足够好，使得一个码元携带无穷个比特，那么最大数据传输速率C~max~就可以无穷大。

### 6.1.4 香农定理

介绍香农定理之前需要引入一个概念，即**信噪比**。要清楚**噪声的影响是相对**的，也就是说，信号较强，噪声的影响就相对较小（两者是同时变化的，仅考虑两者之一是没有任何意义的)，所以求信号的平均功率和噪声的平均功率之比（记为SN,读作“信噪比”）才有意义，即
$$
信噪比(dB)=10\log_{10}(S/N)(dB)
$$
得到香农公式
$$
C_{max}=W\times \log_2(1+S/N)(bit/s)
$$
其中，W为信道的带宽，所以要想提高最大数据传输速率，就应设法提高传输线路的带宽或者设法提高所传信号的信噪比。

### 6.1.5 两个定理的比较

奈奎斯特定理公式指出了**码元传输的速率是受限的，不能任意提高，否则在接收端就无法正确判定码元是1还是0（因为有码元之间的相互干扰）**。奈奎斯特定理公式是在理想条件下推导出来的。在实际条件下，最高码元传输速率要比理想条件下得出的数值还要小些。电信技术人员的任务就是要在实际条件下，寻找出较好的传输码元波形，将比特转换为较为合适的传输信号。需要注意的是，奈奎斯特定理公式并没有对信息传输速率(bt/s)给出限制（也就是可以无限大）。要提高信息传输速率就必须使每个传输的码元能够代表许多个比特的信息，这就需要有很好的编码技术。

**香农公式给出了信息传输速率的极限，即对于一定的传输带宽（以Hz为单位）和一定的信噪比，信息传输速率的上限就确定了。**这个极限是不能够突破的。要想提高信息的极限传输速率，或者必须设法提高传输线路的带宽，或者必须设法提高所传信号的信噪比，此外没有其他办法。至少到现在为止，还没有听说有谁能够突破香农公式给出的信息传输速率的极限。香农公式告诉人们，若要得到无限大的信息传输速率，只有两个办法：要么使用无限大的传输带宽（这显然不可能），要么使信号的信噪比为无限大，即采用没有噪声的传输信道或使用无限大的发送功率（当然这些也都是不可能的）。

### 6.1.6 数据传输方式

这在第一章讲过，这里再做细化说明。

数据传输方式包括电路交换、报文交换和分组交换

![image-20220510113153114](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/image-20220510113153114.png)

#### 1、电路交换

电路交换：电路交换在通信之前要在通信双方之间建立**一条被双方独占的物理通路**(由通信双方之间的交换设备和链路逐段连接而成)

##### 优点

:one: **通信时延小**。由于通信线路为通信双方用户专用，数据直达，因此传输数据的时延非常小。

:two: **实时性强**。通信双方之间的物理通路一旦建立，双方可以随时通信，所以实时性强。

:three: **有序传输**。双方通信时按发送顺序传送数据，不存在失序问题。

:four: **适用范围广**。电路交换既适用于传输模拟信号，也适用于传输数字信号。

:six: **控制简单**。电路交换的交换设备（交换机等）及控制均较简单。

:seven: **避免冲突**。不同的通信双方拥有不同的信道，不会出现争用物理信道的问题。

##### 缺点

:one: **建立连接时间长**。电路交换建立连接的平均时间相对计算机通信来说太长。

:two: **信道利用率低**。电路交换连接建立后，物理通路被通信双方独占，即使通信线路空闲，也不能供其他用户使用，因而信道利用率低。

:three: **缺乏统一标准**。当电路交换时，数据直达，不同类型、不同规格、不同速率的终端很难相互进行通信，也难以在通信过程中进行差错控制。

:four: **灵活性差**。只要通信双方建立的通路中的任何一个节点出了故障，就必须重新拨号建
立新的连接。

#### 2、报文交换

**报文交换：数据交换的单位是报文，报文携带有目的地址、源地址等信息。报文交换在**
**交换节点采用存储转发的传输方式。**

##### 优点

:one:**无需建立连接**。报文交换不需要为通信双方预先建立一条专用的通信线路，不存在建立连接时延，用户可随时发送报文。

:two:**动态分配线路**。当发送方把报文交给交换设备时，交换设备先存储整个报文，然后选择一条合适的空闲线路，将报文传送出去。

:three: **提高可靠性**。如果某条传输路径发生故障，可重新选择另一条路径传输数据，所以提高了传输的可靠性。

:four: **提高线路利用率**。通信双方不是固定占有一条通信线路，而是在不同的时间一段一段地部分占有这条物理通路，因而大大提高了通信线路的利用率。

:five: **提供多目标服务**。一个报文可以同时发送到多个目的地址，这在电路交换中是很难实
现的。

##### 缺点

:one: 由于数据进入交换节点后要经历存储、转发这一过程，**从而引起转发时延**

:two: 报文交换对报文的大小没有限制，这就要求网络节点需要有**较大的存储缓存空间**。

:label: 报文交换主要用在早期的**电报通信网**中，现在用得较少，通常被较先进的分组交换方式所取代。

#### 3、分组交换

分组交换：分组交换仍采用存储转发传输方式，但**将一个长报文先分割为若干个较短的分组**，然后把这些分组（携带源地址、目的地址和编号信息）逐个地发送出去，因此分组交换与报文交换相比有以下优缺点。

##### 优点

:one: 加速传输。因为分组是逐个传输的，所以可以使后一个分组的存储操作与前一个分组的转发操作并行，这种流水线式传输方式减少了报文的传输时间。此外，传输一个分组所需的缓冲区比传输一份报文所需的缓冲区小得多，这样因缓冲区不足而等待发送的概率及等待的时间也必然少得多。

:two: 简化了存储管理。因为分组的长度固定，相应的缓冲区的大小也固定，在交换节点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易。

:three: 减少了出错概率和重发数据量。因为分组较短，其出错概率必然减少，所以每次重发的数据量也就大大减少，这样不仅提高了可靠性，也减少了传输时延。

##### 缺点

:one: 存在传输时延。尽管分组交换比报文交换的传输时延少，但相对于电路交换仍存在存储转发时延，而且其节点交换机必须具有更强的处理能力。

:two: 当分组交换采用数据报服务时，可能出现失序、丢失或重复分组现象，分组到达目的节点时，要对分组按编号进行排序等工作，增加了麻烦。若采用虚电路服务，虽然无失序问题，但有呼叫建立、数据传输和虚电路释放3个过程。

总之，若要传送的数据量很大，且其传送时间远大于呼叫时间，则采用电路交换较为合适：当端到端的通路由很多段的链路组成时，采用分组交换传送数据较为合适。从提高整个网络的信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合计算机之间的**突发式的数据通**信。

#### 电路交换与分组交换的比较

| 比较标准               | 电路交换                   | 分组交换                     |
| ---------------------- | -------------------------- | ---------------------------- |
| 建立连接               | 要求                       | 不要求                       |
| 专用物理路径           | 是                         | 否                           |
| 每个分组沿着规定的路径 | 是                         | 否                           |
| 分组按按序到达         | 是                         | 否                           |
| 路由器瘫痪造成的影响   | 是                         | 否                           |
| 可用带宽               | 固定                       | 动态                         |
| 可能拥塞的时间点       | 建立呼叫连接的时候         | 每个分组传送的时候           |
| 可能有浪费的带宽       | 是                         | 否                           |
| 使用存储转发           | 否                         | 是                           |
| 透明性                 | 是                         | 否                           |
| 收费                   | 每分钟（打电话按时间收费） | 每个分组（手机上网流量收费） |

### 6.1.7 数据报和虚电路

在第四章的网络层也讲过这些。

分组交换分为面向连接的虚电路方式（ATM网络）和无连接的数据报方式（Internet网络）

> 有时候单独将虚电路交换方式virtual switching单独拿出来说，如第一章的时候。

#### 1、数据报

假设主机A给主机B发送一个报文，高层协议会将报文拆分成若干带有序号和完整目的地址的分组，交换机根据转发表转发分组。其原理如下：

:one: 首先主机A先将分组逐个地发往与它直接相连的交换机1，交换机1将主机A发来的分组缓存。

:two: 然后查找自己的转发表，不同时刻转发表的内容可能不相同，因此有的分组转发给交换机2，有的分组转发给交换机3和交换机4。

:three: 依次类推，直到所有分组到达主机B。

注意：当分组正在交换机1-交换机2、交换机1-交换机3等链路上传送时，分组并不占用网络其他部分的资源。换句话说，当主机A在发送分组时，主机B也可同时发送分组。——<mark>Internet的资源使用方式：统计复用statistical multiplexing</mark>

![image-20220510115431741](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/image-20220510115431741.png)

数据报方式具有以下特点：

:one: **发送分组前无需建立连接**。

:two: **网络尽最大努力交付**，传输不保证可靠性，即可能丢失。每个分组都是被独立处理的，
所以转发的路径可能不同，因此不一定按序到达接收方。

:three: 在具有多个分组的报文中，交换机尚未接收完第二个分组，己经收到的第一个分组就可以转发出去，不仅减小了延迟，而且大大提高了吞吐量。

:four: 当某一台交换机或一段链路故障时，可相应地更新转发表，寻找到另一条替代路径转发分组，**对故障适应能力强。**

:five: 发送方和接收方不独占某一链路，**所以资源利用率高**。

#### 2、虚电路

虚电路方式要求在发送数据之前，在源主机和目的主机之间建立一条虚连接。一旦虚连接建立以后，用户发送的数据（以分组为单位）将通过该路径按顺序传送到达目的主机。当通信完成之后用户发出释放虚电路请求，由网络清除该虚连接。

虚电路方式与电路交换方式极其相似。其实**虚电路方式就是将数据报方式与电路交换方式结合起来**，充分发挥二者优点。

虚电路方式的通信过程分为3个阶段：**虚电路建立、数据传输与虚电路释放阶段。**

假设主机A给主机B发送一个报文，原理如下：

> :one: 主机A先发出一个特殊的“呼叫请求”分组，该分组通过中间交换机送往主机B。如果同意连接，主机B就发送“呼叫应答”分组进行确认，虚电路就建立好了。
>
> :two: 虚电路建立之后，主机A就可以向主机B发送分组了。由于所有分组都是走同样的路径，因此**分组一定按序到达目的主机。**
>
> :three: 分组传输结束后，主机通过发送“释放请求”分组以拆除虚电路，整个连接就断开了。

由以上分析可知虚电路方式具有以下特点：

> :one: 用户之间通信**必须建立连接**，数据传输过程中不再需要寻找路径，相对数据报方式时延较小。
>
> :two: 通常分组**走同样的路径**，所以分组一定是按序到达目的主机的。
>
> :three: 分组首部并不包含目的地址，而是**包含虚电路标识符**，相对数据报方式开销小。
>
> :four: 当某个交换机或某条链路出现故障而彻底失效时，所有经过该交换机或该链路的虚电路将遭到破坏。

#### 数据报服务与虚电路服务的特性比较

| 比较标准                   | 数据包服务                         | 虚电路服务                                   |
| -------------------------- | ---------------------------------- | -------------------------------------------- |
| 连接的建立                 | 不需要                             | 需要                                         |
| 地址信息                   | 每个分组包含完整的源地址和目的地址 | 每个分组包含一个虚电路号                     |
| 状态信息                   | 路由器不保留任何有关连接的状态信息 | 每个虚电路都要求路由器为每个连接建立表现     |
| 分组的转发                 | 每个分组有独立的路径               | 当虚电路建立时，所有分组都是沿着这条路径传输 |
| 路由器（交换机）失效的影响 | 没有                               | 所有经过此失效交换机的虚电路都将中止         |
| 端到端的差错处理           | 主机负责                           | 由通信子网负责                               |
| 端到端的流量处理           | 主机负责                           | 由通信子网负责                               |
| 分组的顺序                 | 到达目的站不一定按序               | 总是按序到达                                 |
| 思路                       | 可靠通信应当由用户主机来保证       | 可靠通信应当由网络来保证                     |

## 6.2 传输介质

这个在第一章的时候也有讲过，省去传输介质的介绍。

### 6.2.1 物理层接口特性

传输介质并不是物理层。传输介质在物理层的下面。由于物理层是体系结构的第1层，因此有时将传输介质称为第0层。在传输介质中传输的是信号，但传输介质并不知道所传输的信号代表什么意思。也就是说，传输介质不知道所传输的信号什么时候是1，什么时候是0。**而物理层由于规定了功能特性，因此能够识别所传送的比特流**，如图所示。

![image-20220510151532146](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/image-20220510151532146.png)

由以上分析可知，物理层**考虑的是怎样才能在连接各种计算机的传输介质上传输数据比特流**，而不是指具体的传输介质。物理层应尽可能地屏蔽各种物理设备的差异，使得数据链路层只需考虑本层的协议和服务。换句话说，物理层主要的功能其实**就是确定与传输介质的接口有关的一些特性**，即物理层接口的特性。对于以下4个特性的定义只需记住关键字即可，

:one: **机械特性**：指明接口的形状、尺寸、引线数目和排列等。其实这类似于常用的电源插座，一般常见的是2个孔的和3个孔的，1个孔和4个孔比较少见，这些就是指明的一些属性。如果生产厂家不按照这个规则来做，就无法与电器连接。

:two: **电气特性**：电压的范围，即何种信号表示电压0和1。

:three: **功能特性**：接口部件的信号线（数据线、控制线、定时线等）的用途。

:four: **规程特性**：或称为过程特性，**物理线路上对不同功能的各种可能事件的出现顺序，即时序关系**。


## 6.3 物理层设备

### 6.3.1 中继器

物理层设备主要包含中继器和集线器。

在计算机网络中，最简单的就是两台计算机通过两块网卡构成双机互连，这两台计算机的网卡之间一般是由非屏蔽双绞线来充当信号线的。由于双绞线在传输信号时信号功率会逐渐衰减，当信号衰减到一定程度时会造成信号失真，因此在保证信号质量的前提下，双绞线的最大传输距离为100m。当两台计算机之间的距离超过100m时，为了实现双机互连，人们便在这两台计算机之间安装一个中继器，它的作用就是将已经衰减得不完整的信号经过整理，重新产生出完整的信号再继续传送。注意：放大器和中继器都是起放大信号的作用，只不过**放大器放大的是模拟信号，中继器放大的是数字信号。**

### 6.3.2 集线器

这个在第五章的链路层中也讲过，在基于集线器的星形拓扑以太网中进行应用。

通过中继器或集线器连接起来的几个网段仍然是一个局域网。

使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是CSMA/CD协议，并共享逻辑上的总线。

## 参考资料

[1] 天勤第11版 2023版计算机网络高分笔记

