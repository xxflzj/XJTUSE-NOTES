[TOC]

# 第一章 引论

![第一章 引论](https://img-blog.csdnimg.cn/img_convert/04b72eb96c6c01afd66245515648f329.png)

## 一、编译程序概念

### 1、编译程序历史

编译程序是系统软件中资格最老的成员之一，已经形成一套较为**系统化**的编译理论与方法

> 操作系统、数据库管理系统和编译程序

### 2、与其他课程的关系

![image-20220117084000715](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220117084000715.png)

### 3、编译理论的应用

![image-20220117085807391](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220117085807391.png)

### 4、翻译程序

翻译程序（translator）是一种程序，其输入时某种语言的一系列语句，而其输出则是另一种语言的一系列语句

![image-20220117082818147](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220117082818147.png)

语言没有高低之分

### 5、编译程序

<mark>**编译程序（Compiler）**</mark>是一种程序。它把用高级语言写的源程序作为数据接收，经过翻译转换，产生面向机器的代码作为输出。

这当中代码还可能要由汇编程序或装配程序作进一步加工，得出目标程序，交给计算机执行

:label: **语言有高低之分**

![image-20220117083333118](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220117083333118.png)





## 二、编译过程概述

### 1、编译过程的组成

![image-20220117084608051](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220117084608051.png)

### 2、词法分析

**任务**：输入源程序;扫描、分解字符串，识别出一个个单词（基本字、标识符、算符、界符、常数)。

**所做转换**：源程序字符串->单词符号

**依据**：构词规则  **理论基础**：自动机理论

**示例**

![image-20220228204008952](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220228204008952.png)

### 3、语法分析

**任务**：在词法分析基础上，将单词符号串转化为语法单位( 语法范畴)(短语、子句、句子、程序段、程序)，并确定整个输入串是否构成语法上正确的程序

**所做转换**：单词符号->语法单位（语法范畴）

**依据**：语法规则  **理论基础**：上下文无关文法

**举例**

![image-20220228204334848](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220228204334848.png)

### 4、中间代码生成

**任务**：对语法分析所识别出的各类语法范畴，分析其含义，并进行初步翻译(产生中间代码)（程序段、程序)，并确定整个输入串是否构成语法上正确的程序

**所做转换**：语法范畴->中间代码

> 不是所有的语法范畴都对应中间代码

**依据**：语义规则  **理论基础**：属性文法

### 5、代码优化

**任务**：对于代码(主要是中间代码)进行加工变换，以期能够产生更为高效(省时间和空间)的目标代码。

**所做转换**：中间代码->中间代码（优化后）

**依据**：程序等价变换规则  **理论基础**：数据流方程

例如可将乘法优化为加法

### 6、目标代码生成

**任务**：将中间代码（通常是优化后的）变换成特定机器上的低级语言代码

**目标代码形式**：绝对指令、可重定位指令、汇编指令

**所做转换**：中间代码->目标代码

**依据**：硬件体系结构、指令系统



## 三、编译程序的结构

体系结构包括了结构，其中还有行为、交互关系等动态信息，结构是静止的。

如果把词法分析、语法分析、语义分析均组织成单独一遍这种编译程序设计思想使用的是哪种软件体系结构风格？

<mark>串行化批处理风格</mark>

### 1、编译程序总框

<img src="https://img-blog.csdn.net/20170506204154323?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2ZseXM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" style="zoom:67%;" />

### 2、表格与表格管理

编译各阶段均需要维持表格并进行表格管理

建表的技术支持是**数据结构**

表格的分类、结构、处理方法决定于语言和机器还有优化措施

涉及的表格有：符号名表、常数表、标号表、入口名表、过程引用表、循环表、等价名表、公用链表、格式表、中间代码表等

### 3、出错处理

一个好的编译程序应该：最大限度发现错误、准确指出错误的性质和发生地点、将错误的影响限制在尽可能小的范围内

若能自动校正错误则更好，但是代价很高

源程序中的错误

> 语法错误：不符合语法（词法）规则的错误，如单词拼写错误、括号不匹配
>
> 语义错误：不符合语义规则的错误：说明错误等

### 4、遍

**遍**是对**源程序或源程序的中间结果**从头到尾扫描一次，并作有关的加工处理，生成新的中间结果或目标程序。

> 第一遍的输入是源程序，最后一遍的输出是目标程序

![image-20220121103051121](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220121103051121.png)

### 5、编译前端和后端

**编译前端**主要由与源语言有关但与目标机无关的那些部分组成。

**编译后端**包括编译程序中与目标机有关的那些部分。

![image-20220518172649778](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/image-20220518172649778.png)

## 四、编译程序生成

### 1、编译程序的构造工具

以往编译程序的构造大多采用机器语言或汇编语言。现在编译程序的构造越来越多采用高级语言。
有时为了充分发挥效率或满足不同需求，仍然采用机器语言或汇编语言构造编译程序（或其核心部分

### 2、T型图

![image-20220228205142358](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220228205142358.png)

### 3、用高级语言L1构造编译程序

已经有用A机器代码实现的高级语言**L1的编译程序**

可用高级语言L1编写另一个高级语言L2的编译程序

将写好语言L2的编译程序用L1的编译程序编译后就可得到用A机器代码实现的 **L2编译程序**

![image-20220228205448837](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220228205448837.png)

> 端口相邻之间要匹配
>
> 挨在一起说明是输入输出关系

### 4、编译程序的移值

采用一种所谓的“移植”方法,我们可以利用A机器上已有的高级语言L编写一个能够在B机器上运行的高级语言L的编译程序。做法是,先用 L语言编写出在 A 机器上运行的产生 B 机器代码的 L 编译程序源程序,然后把该源程序经过 A 机器上的 L 编译程序编译后得到能在 A 机器上运行的产生 B 机器代码的编译程序,用这个编译程序再一次编译上述编译程序源程序就得到了能在 B 机器上运行的产生 B 机器代码的编译程序。用 T形图表示为图所示。

![image-20220228212007437](https://note-image-1307786938.cos.ap-beijing.myqcloud.com/typora/qshell/image-20220228212007437.png)

### 5、自编译方式

先对语言的核心部分构造一个小小的编译程序（可用低级语言实现）再以它为工具材造能编译更多语言成分的较大编译程序。如此不断扩展，最后形成整个编译程序。

### 6、构造工具

自动产生扫描器：LEX、FLEX（词法生成器）

自动产生语法分析器 	YACC 、BISON

### 7、学习要点

要在某一台机器上为某种语言构造一个编译程序,必须掌握下述三方面的内容：

:one: **源语言**，对被编译的源语言（如FORTRAN、Pascal或C)，要深刻理解其结构（语法）和含义(语义);

:two: **目标语言**,假定目标语言是机器语言,那么,就必须搞清楚硬件的系统结构和操作系统的功能；

:three: **编译方法**,把一种语言程序翻译为另一种语言程序方法很多,但必须准确地掌握



## 参考资料

1、西安交通大学软件工程专业编译原理 吴晓军 2022春

2、国防科技大学MOOC

2、【编译原理】编译原理简单介绍  https://blog.csdn.net/cflys/article/details/71274116

3、 陈火旺，刘春林，谭庆平，赵克佳，刘越. 程序设计语言编译原理（第3版）. 北京：国防工业出版社，2010/20132017

